# Clash.Meta Configuration File
# Final optimized version with robust and clean chain proxy logic.

# DNS Configuration
dns:
  enable: true
  listen: 0.0.0.0:1053
  prefer-h3: false
  respect-rules: true
  use-system-hosts: false
  cache-algorithm: arc
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '+.lan'
    - '+.local'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
    - 'localhost.ptlogin2.qq.com'
    - 'localhost.sec.qq.com'
    - 'localhost.work.weixin.qq.com'
  default-nameserver: [223.5.5.5, 1.2.4.8]
  nameserver:
    - "https://cloudflare-dns.com/dns-query"
    - "https://doh.pub/dns-query"
  proxy-server-nameserver: ["https://doh.pub/dns-query"]
  direct-nameserver: ["https://doh.pub/dns-query"]
  direct-nameserver-follow-policy: false
  nameserver-policy:
    'geosite:cn': ["https://doh.pub/dns-query", "https://223.5.5.5/dns-query"]

# Proxies - Landing nodes are defined here but are NOT for direct use.
proxies:
  - name: "ğŸ‡ºğŸ‡¸ Aliceè½åœ°"
    server: "91.103.121.216"
    port: 1080
    type: socks5
    username: "wangbaoqiang"
    password: "wangdabao5424"
    udp: true
  - name: "ğŸ‡¯ğŸ‡µ ACCKæ—¥æœ¬è½åœ°"
    server: "154.82.137.234"
    port: 20742
    type: ss
    cipher: "chacha20-ietf-poly1305"
    password: "123456"
    udp: true

# Proxy Providers - Your entry point subscriptions.
proxy-providers:
  "æµé‡å…‰":
    type: http
    url: "https://rgergergergerg6555.saojc.xyz/api/v1/client/subscribe?token=44e06d7500a929e0ea0e21f4d09d0273"
    interval: 86400
    health-check: { enable: true, url: "https://www.google.com/generate_204", interval: 300 }
    override: { additional-prefix: "æµé‡å…‰ |" }
  "green":
    type: http
    url: "http://green.592527.xyz:2096/wangbaoqiang/7ruf35lzrntxcu25"
    interval: 86400
    health-check: { enable: true, url: "https://www.google.com/generate_204", interval: 300 }
    override: { additional-prefix: "green |" }
  "ouo":
    type: http
    url: "https://push.cauenvao.click/api/v1/client/subscribe?token=1a6d8263800c15ecb2c53acc163dc5fb"
    interval: 86400
    health-check: { enable: true, url: "https://www.google.com/generate_204", interval: 300 }
    override: { additional-prefix: "ouo |" }

# Rule Providers (Shortened for brevity, no changes needed)
rule-providers:
  reject: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt", path: "./ruleset/loyalsoldier/reject.yaml" }
  icloud: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt", path: "./ruleset/loyalsoldier/icloud.yaml" }
  apple: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt", path: "./ruleset/loyalsoldier/apple.yaml" }
  google: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt", path: "./ruleset/loyalsoldier/google.yaml" }
  proxy: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt", path: "./ruleset/loyalsoldier/proxy.yaml" }
  direct: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt", path: "./ruleset/loyalsoldier/direct.yaml" }
  private: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt", path: "./ruleset/loyalsoldier/private.yaml" }
  gfw: { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt", path: "./ruleset/loyalsoldier/gfw.yaml" }
  "tld-not-cn": { type: http, format: yaml, interval: 86400, behavior: domain, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt", path: "./ruleset/loyalsoldier/tld-not-cn.yaml" }
  telegramcidr: { type: http, format: yaml, interval: 86400, behavior: ipcidr, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt", path: "./ruleset/loyalsoldier/telegramcidr.yaml" }
  cncidr: { type: http, format: yaml, interval: 86400, behavior: ipcidr, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt", path: "./ruleset/loyalsoldier/cncidr.yaml" }
  lancidr: { type: http, format: yaml, interval: 86400, behavior: ipcidr, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt", path: "./ruleset/loyalsoldier/lancidr.yaml" }
  applications: { type: http, format: yaml, interval: 86400, behavior: classical, url: "https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt", path: "./ruleset/loyalsoldier/applications.yaml" }
  openai: { type: http, format: yaml, interval: 86400, behavior: classical, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/classical/openai.yaml", path: "./ruleset/MetaCubeX/openai.yaml" }

# Proxy Groups
proxy-groups:
  - name: "ğŸ”° æ¨¡å¼é€‰æ‹©"
    type: select
    proxies:
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"   # For general use
      - "ğŸ”— é“¾å¼ä»£ç†"   # For unlocking specific services
      - "ğŸ”— å…¨å±€ç›´è¿"
      - "ğŸ¥° å¹¿å‘Šè¿‡æ»¤"

  - name: "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸš‘ æ•…éšœè½¬ç§»"
    use: ["æµé‡å…‰", "green", "ouo"]
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/adjust.svg"

  - name: "ğŸ”— é“¾å¼ä»£ç†"
    type: select
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/chains.svg"
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½è§£é”"
      - "ğŸ‡¯ğŸ‡µ æ—¥æœ¬è§£é”"
      # You can create more chains by copying the structure below

  # --- Chain Builder Groups (The core logic) ---
  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½è§£é”"
    type: url-test
    use: ["æµé‡å…‰", "green", "ouo"]
    dialer-proxy: "ğŸ‡ºğŸ‡¸ Aliceè½åœ°" # Exit through US node
    url: "https://www.google.com/generate_204"
    interval: 3600
  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬è§£é”"
    type: url-test
    use: ["æµé‡å…‰", "green", "ouo"]
    dialer-proxy: "ğŸ‡¯ğŸ‡µ ACCKæ—¥æœ¬è½åœ°" # Exit through JP node
    url: "https://www.google.com/generate_204"
    interval: 3600
    
  # --- Standard Groups ---
  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    use: ["æµé‡å…‰", "green", "ouo"]
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/speed.svg"
    url: "https://www.google.com/generate_204"
    interval: 300

  - name: "ğŸš‘ æ•…éšœè½¬ç§»"
    type: fallback
    use: ["æµé‡å…‰", "green", "ouo"]
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/ambulance.svg"
    url: "https://www.google.com/generate_204"
    interval: 300

  # --- Policy Groups for Rules ---
  - name: "ğŸ’¸ AIæœåŠ¡"
    type: select
    proxies:
      - "ğŸ”— é“¾å¼ä»£ç†" # Prioritize chains for unlocking
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ”— å…¨å±€ç›´è¿"
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/chatgpt.svg"
  
  - name: "ğŸ¬ æµåª’ä½“"
    type: select
    proxies:
      - "ğŸ”— é“¾å¼ä»£ç†" # Prioritize chains for unlocking
      - "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"
      - "ğŸ”— å…¨å±€ç›´è¿"
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/youtube.svg"

  - name: "ğŸ“² ç”µæŠ¥æ¶ˆæ¯"
    type: select
    proxies: ["âš™ï¸ èŠ‚ç‚¹é€‰æ‹©", "ğŸ”— å…¨å±€ç›´è¿"]
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/telegram.svg"

  - name: "ğŸ è‹¹æœæœåŠ¡"
    type: select
    proxies: ["ğŸ”— å…¨å±€ç›´è¿", "âš™ï¸ èŠ‚ç‚¹é€‰æ‹©"]
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/apple.svg"

  - name: "ğŸ¥° å¹¿å‘Šè¿‡æ»¤"
    type: select
    proxies: ["REJECT", "DIRECT"]
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/bug.svg"
  
  - name: "ğŸ”— å…¨å±€ç›´è¿"
    type: select
    proxies: ["DIRECT"]

  - name: "ğŸŸ æ¼ç½‘ä¹‹é±¼"
    type: select
    proxies: ["ğŸ”° æ¨¡å¼é€‰æ‹©", "ğŸ”— å…¨å±€ç›´è¿"]
    icon: "https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/fish.svg"


# Rules - Pointing services to the right policy groups
rules:
  # Unlock specific services using chains
  - DOMAIN-SUFFIX,netflix.com,ğŸ¬ æµåª’ä½“
  - DOMAIN-KEYWORD,hbo,ğŸ¬ æµåª’ä½“
  - DOMAIN-SUFFIX,disneyplus.com,ğŸ¬ æµåª’ä½“
  
  # AI Services
  - RULE-SET,openai,ğŸ’¸ AIæœåŠ¡
  
  # Other rules
  - RULE-SET,applications,ğŸ”— å…¨å±€ç›´è¿
  - RULE-SET,private,ğŸ”— å…¨å±€ç›´è¿
  - RULE-SET,reject,ğŸ¥° å¹¿å‘Šè¿‡æ»¤
  - RULE-SET,icloud,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,google,âš™ï¸ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,proxy,âš™ï¸ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,gfw,âš™ï¸ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,tld-not-cn,âš™ï¸ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,direct,ğŸ”— å…¨å±€ç›´è¿
  - RULE-SET,lancidr,ğŸ”— å…¨å±€ç›´è¿,no-resolve
  - RULE-SET,cncidr,ğŸ”— å…¨å±€ç›´è¿,no-resolve
  - RULE-SET,telegramcidr,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
  - GEOIP,LAN,ğŸ”— å…¨å±€ç›´è¿,no-resolve
  - GEOIP,CN,ğŸ”— å…¨å±€ç›´è¿,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

